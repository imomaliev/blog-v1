<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<link rel=icon href=/favicon.ico>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Blog</title>
<link rel=stylesheet href="/blog/css/main.min.0a1265f87d82ecc5f08f9855f888f820ab77c67e51ba121bafdccbb5c3ddae79.css">
</head>
<body><header>
<nav>
<ul>
<a class="text-lg font-bold text-cyan-600" href=/blog/ title=Blog>Blog</a>
|
<a class="underline
text-lg font-bold text-cyan-600" href=/blog/tils/ title=TILs>TILs</a>
</ul>
</nav>
</header>
<div id=content>
<article class="prose prose-sm sm:prose-base lg:prose-lg xl:prose-xl 2xl:prose-2xl
prose-cyan mx-auto">
<h1>NPM | Build Behaves Differently Inside Docker</h1>
<h2 id=question>Question</h2>
<p>I was pulling my hair out trying to understand why inside docker npm bulid is behaving differently.</p>
<h2 id=answer>Answer</h2>
<p>Issue was due to docker container was not seeing the same files as local <code>npm build</code>. I forgot to mount some files! We are using <code>postcss</code> for tailwind in one of our projects. There is a feature called <code>tree-shaking</code> which is during build deletes all unused styles from final bundle. So&mldr; Because I forgot to make some of our templates visiable to frontend container postcss thought that styles were not used and purged them.</p>
<h2 id=what-i-learned>What I Learned</h2>
<ol>
<li>When reading configuration files do not rush and reread carefully. In our <code>tailwind.config.js</code> it is directly stated that this files are going to be used for purging.</li>
<li>May there should be some type of error handling for such cases. When <code>tailwind</code> expects some files for purging but they are not persent, throw a warning.</li>
</ol>
</article>
</div></body>
</html>