<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tils on Blog</title><link>https://imomaliev.github.com/blog/tils/</link><description>Recent content in Tils on Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 28 Jul 2021 14:39:31 +0700</lastBuildDate><atom:link href="https://imomaliev.github.com/blog/tils/index.xml" rel="self" type="application/rss+xml"/><item><title>Setup Workrtree</title><link>https://imomaliev.github.com/blog/tils/setup-workrtree/</link><pubDate>Wed, 28 Jul 2021 14:39:31 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/setup-workrtree/</guid><description>Setup worktree Question What is the best way to setup git worktree?
Answer Create bare clone and put it to project/.git. This way git files will not be in a root of a project
$ git clone --bare git@github.com:user/project.git project/.git Update .git/config. To make behave more normally and be fetchable.
[core] repositoryformatversion = 0 filemode = true bare = true + logallrefupdates = true precomposeunicode = true [remote &amp;#34;origin&amp;#34;] url = git@github.</description></item><item><title>Buildkit Use Cache From</title><link>https://imomaliev.github.com/blog/tils/buildkit-use-cache-from/</link><pubDate>Sat, 29 May 2021 12:12:34 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/buildkit-use-cache-from/</guid><description>In CI buildkit images are not reusing cache from provided images Question I&amp;rsquo;ve recently updated our CI to use buildkit for building docker images. But I noticed that docker build command with &amp;ndash;cache-from buildkit image is not reusing cache.
Answer We need to provide --build-arg BUILDKIT_INLINE_CACHE=1 for docker build command so that cache metadata will written into image
From docs
In addition to local build cache, the builder can reuse the cache generated from previous builds with the &amp;ndash;cache-from flag pointing to an image in the registry.</description></item><item><title>Get Mock Image With Custom Size And Text</title><link>https://imomaliev.github.com/blog/tils/get-mock-image-with-custom-size-and-text/</link><pubDate>Mon, 26 Apr 2021 17:30:01 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/get-mock-image-with-custom-size-and-text/</guid><description>How to get mock image with custom size and text Question To show how adaptive frontend behaves I needed to create current frontend cards layout with numbered images
Answer https://via.placeholder.com/1280x800.png?text=1
Where text could be anything you want and 1280x800 as you might have guessed is image size</description></item><item><title>Disable Healthcheck</title><link>https://imomaliev.github.com/blog/tils/disable-healthcheck/</link><pubDate>Wed, 07 Apr 2021 15:55:36 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/disable-healthcheck/</guid><description>Disable healthcheck Question When running pdb with enabled healthcheck it gets really annoying because during your debug session you keep getting healthcheck requests
Answer Docker Use --no-healthcheck (https://docs.docker.com/engine/reference/run/#healthcheck)
&amp;ndash;no-healthcheck Disable any container-specified HEALTHCHECK
$ docker run --no-healthcheck docker-compose Use disable: true (https://github.com/compose-spec/compose-spec/blob/master/spec.md#healthcheck)
healthcheck: disable: true</description></item><item><title>Docker Compose Profiles</title><link>https://imomaliev.github.com/blog/tils/docker-compose-profiles/</link><pubDate>Mon, 05 Apr 2021 13:13:52 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/docker-compose-profiles/</guid><description>Docker compose profiles directive Question I was trying to have smart separtion between different development environments for our project. Fox example only run selected services when developing frontend locally, or run different set of services when developing backend locally.
Answer For now we are using docker-compose.override.yml. But I found out there is profiles directive https://github.com/compose-spec/compose-spec/blob/master/spec.md#profiles</description></item><item><title>Sign Document</title><link>https://imomaliev.github.com/blog/tils/sign-document/</link><pubDate>Mon, 05 Apr 2021 12:42:35 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/sign-document/</guid><description>How to sign document Question I needed to hand sign few PDFs. Per my friend&amp;rsquo;s suggestion I tried to create signature from photo. To do that I searched some online resources and didn&amp;rsquo;t find one that could convert my photo to signature png for free or some opensource solution that I could run locally. Finally I decided to use my touchpad and write one on https://signature.imageonline.co.
Answer After I created png file with my signature I tried to upload it to Preview app and turns out Preview can create signatures from photos and as well via touchpad or iPhone out of the box.</description></item><item><title>Edit Launchctl System Domain Config</title><link>https://imomaliev.github.com/blog/tils/edit-launchctl-system-domain-config/</link><pubDate>Tue, 30 Mar 2021 17:45:58 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/edit-launchctl-system-domain-config/</guid><description>How to edit launchctl system domain configs Question I messed up my launchctl configs while I was trying to disable FortiClient from starting on startup. I tried to use launchctl disable ... for services but ended up adding wrong entries to disable configuration.
Answer Edit /private/var/db/com.apple.xpc.launchd/disabled* files and delete wrong data
What I Learned How to login to single-user mode on macOS.
Press Command-S on system boot</description></item><item><title>Find Out Release Name</title><link>https://imomaliev.github.com/blog/tils/find-out-release-name/</link><pubDate>Tue, 30 Mar 2021 17:45:58 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/find-out-release-name/</guid><description>How to find out release name Question I was trying to dynamically get version name inside docker for debian based image, but there is no lsb_release pre-installed
Answer There is /etc/os-release/ file with all required info, also it is in form of shell env, so we can just source it and use desired variable.
$ . /etc/os-release $ echo $VERSION_CODENAME buster What I Learned For ubuntu . /etc/lsb-release Links https://serverfault.</description></item><item><title>Npm Build Behaves Differently</title><link>https://imomaliev.github.com/blog/tils/npm-build-behaves-differently/</link><pubDate>Mon, 29 Mar 2021 12:56:05 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/npm-build-behaves-differently/</guid><description>Npm build behaves differently inside docker Question I was pulling my hair out trying to understand why inside docker npm bulid is behaving differently.
Answer Issue was due to docker container was not seeing the same files as local npm build. I forgot to mount some files! We are using postcss for tailwind in one of our projects. There is a feature called tree-shaking which is during build deletes all unused styles from final bundle.</description></item><item><title>Filter Quickfix List Entries</title><link>https://imomaliev.github.com/blog/tils/filter-quickfix-list-entries/</link><pubDate>Thu, 25 Mar 2021 23:44:07 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/filter-quickfix-list-entries/</guid><description>How to filter quickfix list entries Question I was trying to get rid of some entries in my quickfix list and found existing plugin
Answer packadd cfilterLinks https://stackoverflow.com/a/51962260/3627387 Delete entry mapping https://stackoverflow.com/a/51962260/3627387</description></item><item><title>Better Way Of Setting Mapping That Calls Cmd</title><link>https://imomaliev.github.com/blog/tils/better-way-of-setting-mapping-that-calls-cmd/</link><pubDate>Tue, 23 Mar 2021 23:45:32 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/better-way-of-setting-mapping-that-calls-cmd/</guid><description>A better way of setting mapping that calls command mode Question I was trying to create mapping that will not be run for help filetype but during that I found out how to propperly set mapping that will run function in command mode
Answer &amp;lt;Cmd&amp;gt;!
The pseudokey begins a &amp;ldquo;command mapping&amp;rdquo;, which executes the command directly (without changing modes). Where you might use &amp;ldquo;:&amp;hellip;&amp;rdquo; in the {lhs} of a mapping, you can instead use &amp;ldquo;&amp;hellip;&amp;rdquo;.</description></item><item><title>Show File On Specific Commit</title><link>https://imomaliev.github.com/blog/tils/show-file-on-specific-commit/</link><pubDate>Tue, 23 Mar 2021 15:01:17 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/show-file-on-specific-commit/</guid><description>Show file at specific commit Question How to show a file at the specifc commit
Answer git show REF:/path/to/file</description></item><item><title>Source Redefines Variables</title><link>https://imomaliev.github.com/blog/tils/source-redefines-variables/</link><pubDate>Sun, 14 Mar 2021 22:43:33 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/source-redefines-variables/</guid><description>source redefines variables Question I was trying to implement new plugin for tmux https://github.com/imomaliev/tmux-keyboard-layout, but for some reason I kept having an issue with tpm plugin update functionality not working propperly. At the begging I thought this was issue with my plugin or tmux setup.
Answer Be careful when using source in bash it could redefine existing variables
What I Learned Turns out the issue was with tpm itself, there was regression introduced in https://github.</description></item><item><title>Disable Forticlient Launch At Login</title><link>https://imomaliev.github.com/blog/tils/disable-forticlient-launch-at-login/</link><pubDate>Thu, 04 Mar 2021 01:01:45 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/disable-forticlient-launch-at-login/</guid><description>How to disable FortiClient launch at login Question FortiClient is automatically added to launch at login, and there is no simple way to disable this
Answer $ sudo vim /Library/LaunchAgents/com.fortinet.forticlient.fct_launcher.plist # edit &amp;lt;key&amp;gt;RunAtLoad&amp;lt;/key&amp;gt; to &amp;lt;false/&amp;gt; value Links https://forum.fortinet.com/tm.aspx?m=97324</description></item><item><title>Create Page In Migration</title><link>https://imomaliev.github.com/blog/tils/create-page-in-migration/</link><pubDate>Sat, 27 Feb 2021 22:15:11 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/create-page-in-migration/</guid><description>How to create page in migration Question After data migration with Page model subclass object creation it doesn&amp;rsquo;t appear in admin
Answer # 1 - get your home page home_page = HomePage.objects.first() # this will get the first HomePage # 2 - create a page instance, this is not yet stored in the DB page = Page( title=&amp;#39;title&amp;#39;, slug=&amp;#39;slug&amp;#39; ) # 3 - create the new page as a child of the parent (home), this puts a new page in the DB home_page.</description></item><item><title>Centos 8.3 Failed To Find Iptables</title><link>https://imomaliev.github.com/blog/tils/centos-8.3-failed-to-find-iptables/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/centos-8.3-failed-to-find-iptables/</guid><description>CentOS 8.3 failed to find iptables Question Trying to install docker on CentOS 8.3, but for some reason systemd kept giving me errors
$ systemctl status docker.service ● docker.service - Docker Application Container Engine Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled) Active: activating (auto-restart) (Result: exit-code) since Thu 2021-02-25 04:59:07 UTC; 918ms ago Docs: https://docs.docker.com Process: 1285 ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock (code=exited, status=1/FAILURE) Main PID: 1285 (code=exited, status=1/FAILURE) Feb 25 04:59:07 yasnoponyatno systemd[1]: docker.</description></item><item><title>Centos Linux Ends In 2021</title><link>https://imomaliev.github.com/blog/tils/centos-linux-ends-in-2021/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/centos-linux-ends-in-2021/</guid><description>CentOS Linux project ends in 2021 Question I was having problems setting up CentOS 8 and stumbled upon that CentOS 8 ends in 2021 instead of 2029
Answer Use CentOS 7 until 2024.
What I Learned For some internal reason RHEL decided to stop funding CentOS Linux and only fund CentOS Stream. https://blog.centos.org/2020/12/future-is-centos-stream/ https://blog.centos.org/2020/12/balancing-the-needs-around-the-centos-platform/</description></item><item><title>Commit Short Sha Length</title><link>https://imomaliev.github.com/blog/tils/commit-short-sha-length/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/commit-short-sha-length/</guid><description>Commit short sha length Question I was trying to match local build behavior to gitlab&amp;rsquo;s one. In gitlab CI there is predifined variable called CI_COMMIT_SHORT_SHA which has a value of first 8 characters of current commit. To get &amp;ldquo;short&amp;rdquo; version of current commit you could run
$ git rev-parse --short HEAD e0c8af0 But this gives you only 7. First of all why it is 7 and how to get 8?</description></item><item><title>Diff Two Strings</title><link>https://imomaliev.github.com/blog/tils/diff-two-strings/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/diff-two-strings/</guid><description>How to diff 2 or more strings Question I want to run diff on 2 strings
Answer https://stackoverflow.com/a/454549/3627387
diff &amp;lt;(echo &amp;#34;$string1&amp;#34; ) &amp;lt;(echo &amp;#34;$string2&amp;#34;) What I Learned How to run shasum on files on macOS $ diff &amp;lt;(shasum -a 256 go1.15.8.linux-amd64.tar.gz) &amp;lt;(echo &amp;#34;d3379c32a90fdf9382166f8f48034c459a8cc433730bc9476d39d9082c94583b go1.15.8.linux-amd64.tar.gz&amp;#34;) Note: there are 2 spaces between sum and file</description></item><item><title>Direnv Dir Env Variable</title><link>https://imomaliev.github.com/blog/tils/direnv-dir-env-variable/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/direnv-dir-env-variable/</guid><description>DIRENV_DIR environment variable Question For some reason DIRENV_DIR has appended - before $PWD
$ echo $DIRENV_DIR -$PWD Answer https://github.com/direnv/direnv/commit/b18b1f59a9eed1b3d7cb2f06980da3f94dad0155#diff-221dbe7605813b08a9a1f12ea8a612f2006f9376d0699dcf6538dca1aa30c668 https://github.com/direnv/direnv/commit/d7778d14384a7c459351cc212b56dacd8b7f0470
What I Learned We need to strip &amp;ldquo;-&amp;rdquo; from DIRENV_DIR before using it $ echo ${DIRENV_DIR#-} $PWD There is &amp;ldquo;named directories&amp;rdquo; concept in zsh but I still need to properly understand it.</description></item><item><title>Registry Login Error Parsing Http 403 Response</title><link>https://imomaliev.github.com/blog/tils/registry-login-error-parsing-http-403-response/</link><pubDate>Sat, 27 Feb 2021 20:53:56 +0700</pubDate><guid>https://imomaliev.github.com/blog/tils/registry-login-error-parsing-http-403-response/</guid><description>Registry login error Question Sometimes error messages very hard to understand
$ docker login registry.gitlab.com Authenticating with existing credentials... Login did not succeed, error: Error response from daemon: Get https://registry.gitlab.com/v2/: error parsing HTTP 403 response body: unexpected end of JSON input: &amp;#34;&amp;#34; Answer After digging through search results which weren&amp;rsquo;t relevant and didn&amp;rsquo;t help I found this https://gitlab.com/gitlab-org/gitlab/-/issues/207509
Turns out the issue was due to IP blocking. VPN solved this without problem.</description></item></channel></rss>